## 正则表达式

---

在Sun的Java JDK 1.40版本中，Java自带了支持正则表达式的包，主要是放在java.util.regex包下面。

```java
 Pattern p_script = Pattern.compile("正则表达式", Pattern.CASE_INSENSITIVE);
 Matcher m_script = p_script.matcher(content);
 while (m_script.find()) {
   // 找到匹配内容，进行后续事情
   String strAid = m_script.group(1);
   。。。。
 }
```
**Matcher类的常用方法：**

* matches()：返回整个目标字符串与Pattern是否匹配

* find()：返回与Pattern匹配的下一个子串

* group()：返回上一次与Pattern匹配的子串中的内容。group是针对（）来说的，group（0）就是指的整个串，group（1） 指的是第一个括号里的东西，group（2）指的第二个括号里的东西

* start()：返回上一次与Pattern匹配的子串在目标字符串中的开始位置。

* end()：返回上一次与Pattern匹配的子串在目标字符串中的结束位置加1。

**正则表达式语法**

|元字符|描述|
|--|--|
| \ | 将下一个字符标记符、或一个向后引用、或一个八进制转义符。例如，“\\n”匹配\n。“\n”匹配换行符。序列“\\”匹配“\”而“\(”则匹配“(”。即相当于多种编程语言中都有的“转义字符”的概念。|
|^ | 匹配输入字符串的开始位置。如果设置了RegExp对象的Multiline属性，^也匹配“\n”或“\r”之后的位置。|
|$ | 匹配输入字符串的结束位置。如果设置了RegExp对象的Multiline属性，$也匹配“\n”或“\r”之前的位置。|
| * | 匹配前面的子表达式任意次。例如，zo*能匹配“z”，“zo”以及“zoo”。*等价于{0,}|
|+ |匹配前面的子表达式一次或多次(大于等于1次）。例如，“zo+”能匹配“zo”以及“zoo”，但不能匹配“z”。+等价于{1,}。|
|?|匹配前面的子表达式零次或一次。例如，“do(es)?”可以匹配“do”或“does”中的“do”。?等价于{0,1}。|
|{n} |n是一个非负整数。匹配确定的n次。例如，“o{2}”不能匹配“Bob”中的“o”，但是能匹配“food”中的两个o。
|{n,} |n是一个非负整数。至少匹配n次。例如，“o{2,}”不能匹配“Bob”中的“o”，但能匹配“foooood”中的所有o。“o{1,}”等价于“o+”。“o{0,}”则等价于“o*”。|
|{n,m} |m和n均为非负整数，其中n<=m。最少匹配n次且最多匹配m次。例如，“o{1,3}”将匹配“fooooood”中的前三个o。“o{0,1}”等价于“o?”。请注意在逗号和两个数之间不能有空格。|
| x\|y |匹配x或y。例如，“z|food”能匹配“z”或“food”或"zood"(此处请谨慎)。“(z|f)ood”则匹配“zood”或“food”。|
| [xyz] |字符集合。匹配所包含的任意一个字符。例如，“[abc]”可以匹配“plain”中的“a”。
| [^xyz]  |负值字符集合。匹配未包含的任意字符。例如，“[^abc]”可以匹配“plain”中的“plin”。
| [a-z] | 字符范围。匹配指定范围内的任意字符。例如，“[a-z]”可以匹配“a”到“z”范围内的任意小写字母字符。|
| [^a-z]  | 负值字符范围。匹配任何不在指定范围内的任意字符。例如，“[^a-z]”可以匹配任何不在“a”到“z”范围内的任意字符。|
| . | 可以匹配任何字符|
| \d | 匹配一个数字字符。等价于[0-9] |
| \D | 匹配一个非数字字符。等价于[^0-9] |
| \s | 匹配所有的空白字符，包括空格、制表符、换页符、换行符、回车符 等等。等价于[ \f\n\r\t\v]。 |
| \S |匹配所有的非空白字符|

更多内容参考：http://www.cnblogs.com/lzq198754/p/5780340.html

**常用正则表达式**

|规则	|正则表达式语法  |
|--|--|
|一个或多个汉字|	^[\u0391-\uFFE5]+$ |
|邮政编码	 | ^[1-9]\d{5}$ |
|QQ号码	 | ^[1-9]\d{4,10}$ |
|用户名（字母开头 + 数字/字母/下划线）|	^[A-Za-z][A-Za-z1-9_-]+$|
|手机号码	 | ^1[3|
|URL|	^((http|
|18位身份证号 |	^(\d{6})(18|
|邮箱| ^[a-zA-Z_]{1,}[0-9]{0,}@(([a-zA-z0-9]-*){1,}\.){1,3}[a-zA-z\-]{1,}$ |
|正整数| ^[1-9]+[0-9]*$ |

### 示例

```
示例：
\\[img(\\=(\\d+)\\,(\\d+))?\\](((http\\:|https\\:)?\\/\\/[a-zA-Z|\\.|0-9]*\\/)?[a-zA-Z|\\/|0-9]*\\.[a-zA-Z]*)\\[\\/img\\]

[img=225,165]http://bbsimg.wacdn.com/forum/201702/07/120732h4p5yw6wk4bwyk5q.jpg[/img]火炉上一分钟如一小时那


group（0）=[img=225,165]http://bbsimg.wacdn.com/forum/201702/07/120732h4p5yw6wk4bwyk5q.jpg[/img]
group（1）==225,165
group（2）=225
group（3）=165
group（4）=http://bbsimg.wacdn.com/forum/201702/07/120732h4p5yw6wk4bwyk5q.jpg
group（5）=http://bbsimg.wacdn.com/
group（6）=http:

```

# 2、cron expression

Cron expression is a string, the string is separated by 5 or 6 spaces, divided into 6 or 7 fields, each field represents a meaning, Cron has the following two syntaxes:

1_Seconds Minutes Hours DayofMonth Month DayofWeek Year

2_Seconds Minutes Hours DayofMonth Month DayofWeek

|          | Seconds | Minutes | Hours   | DayofMonth      | Month               | DayofWeek                | Year                  |
| -------- | ------- | ------- | ------- | --------------- | ------------------- | ------------------------ | --------------------- |
| 字符     | , - * / | , - * / | , - * / | , - * / ? L W C | , - * /             | , - * / ? L C #          | , - * /               |
| 整数     | 0-59    | 0-59    | 0-23    | 0-31            | 1-12的整数或JAN-DEC | 1-7的整数或SUN-SAT       |                       |
| 特别说明 |         |         |         |                 |                     | 1表示星期天，2表示星期一 | 有效范围为1970-2099年 |



| 字符 | 释义                                                         |
| ---- | ------------------------------------------------------------ |
| ,    | 表示列出枚举值值。例如：在Minutes域使用5,20，则意味着在5和20分每分钟触发一次 |
| -    | 表示范围，例如在Minutes域使用5-20，表示从5分到20分钟每分钟触发一次 |
| *    | 表示匹配该域的任意值，假如在Minutes域使用*, 即表示每分钟都会触发事件 |
| /    | 用来指定一个值的的增加幅度.比如在“秒”字段中设置为"0/15"表示"第0, 15, 30,和45秒"。而"5/15"则表示"第5, 20, 35,和50".在'/'前加"*"字符相当于指定从0秒开始.每个字段都有一系列可以开始或结束的数值。对于“秒”和“分”字段来说，其数值范围为0到 59，对于“小时”字段来说其为0到23,对于“日”字段来说为0到31,而对于“月”字段来说为1到12。"/"字段仅仅只是帮助你在允许的数值范围内 从开始"第n"的值 |
| ?    | 只能用在DayofMonth和DayofWeek两个域。它也匹配域的任意值，但实际不会。因为DayofMonth和 DayofWeek会相互影响。例如想在每月的20日触发调度，不管20日到底是星期几，则只能使用如下写法： 13 13 15 20 * ?, 其中最后一位只能用？，而不能使用*，如果使用*表示不管星期几都会触发，实际上并不是这样。 |
| L    | 表示最后，只能出现在DayofWeek和DayofMonth域，如果在DayofWeek域使用5L,意味着在最后的一个星期四触发<br/>在天（星期）自表达式中，“L”表示一个星期的最后一天，也就是SAT<br/>在天（月）子表达式中，“L”表示一个月的最后一天<br/>“6L”表示这个月的倒数第６天，“FRIL”表示这个月的最一个星期五<br/>注意：在使用“L”参数时，不要指定列表或范围，因为这会导致问题 |
| W    | 示有效工作日(周一到周五),只能出现在DayofMonth域，系统将在离指定日期的最近的有效工作日触发事件。例如：在 DayofMonth使用5W，如果5日是星期六，则将在最近的工作日：星期五，即4日触发。如果5日是星期天，则在6日(周一)触发；如果5日在星期一 到星期五中的一天，则就在5日触发。另外一点，W的最近寻找不会跨过月份 |
| LW   | 这两个字符可以连用，表示在某个月最后一个工作日，即最后一个星期五 |
| C    |                                                              |
| #    | 用于确定每个月第几个星期几，只能出现在DayofMonth域。例如在4#2，表示某月的第二个星期三 |



